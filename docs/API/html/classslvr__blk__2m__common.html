<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UWLCM: slvr_blk_2m_common&lt; ct_params_t &gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">UWLCM
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('classslvr__blk__2m__common.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classslvr__blk__2m__common-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">slvr_blk_2m_common&lt; ct_params_t &gt;</div></div>
</div><!--header-->
<div class="contents">

<p>Common base class for 2-moment bulk microphysics solver.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;slvr_blk_2m_common.hpp&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a9d61aec26a13f9277adb2c2ce2033b31" id="r_a9d61aec26a13f9277adb2c2ce2033b31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9d61aec26a13f9277adb2c2ce2033b31">update_rhs</a> (libmpdataxx::arrvec_t&lt; typename parent_t::arr_t &gt; &amp;rhs, const typename parent_t::real_t &amp;dt, const int &amp;at)</td></tr>
<tr class="memdesc:a9d61aec26a13f9277adb2c2ce2033b31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the right-hand-side of the prognostic equations.  <br /></td></tr>
<tr class="separator:a9d61aec26a13f9277adb2c2ce2033b31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5085adafa9d68b1e69d0ac541a4fc4f" id="r_ad5085adafa9d68b1e69d0ac541a4fc4f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad5085adafa9d68b1e69d0ac541a4fc4f">slvr_blk_2m_common</a> (typename parent_t::ctor_args_t args, const rt_params_t &amp;p)</td></tr>
<tr class="memdesc:ad5085adafa9d68b1e69d0ac541a4fc4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <br /></td></tr>
<tr class="separator:ad5085adafa9d68b1e69d0ac541a4fc4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aab1df2789797c5b479d81a6b5869a53f" id="r_aab1df2789797c5b479d81a6b5869a53f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aab1df2789797c5b479d81a6b5869a53f">rc_src</a> ()</td></tr>
<tr class="memdesc:aab1df2789797c5b479d81a6b5869a53f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cloud water source term.  <br /></td></tr>
<tr class="separator:aab1df2789797c5b479d81a6b5869a53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0520b2c8f582d7f9a75f1372b43cfddd" id="r_a0520b2c8f582d7f9a75f1372b43cfddd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0520b2c8f582d7f9a75f1372b43cfddd">nc_src</a> ()</td></tr>
<tr class="memdesc:a0520b2c8f582d7f9a75f1372b43cfddd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cloud droplet concentration source term.  <br /></td></tr>
<tr class="separator:a0520b2c8f582d7f9a75f1372b43cfddd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1055159bcbfa0beb14dc3e96579d5a7" id="r_ae1055159bcbfa0beb14dc3e96579d5a7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae1055159bcbfa0beb14dc3e96579d5a7">rr_src</a> ()</td></tr>
<tr class="memdesc:ae1055159bcbfa0beb14dc3e96579d5a7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rain source term.  <br /></td></tr>
<tr class="separator:ae1055159bcbfa0beb14dc3e96579d5a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91fe670a353cfcc5c1beda82fda2d248" id="r_a91fe670a353cfcc5c1beda82fda2d248"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a91fe670a353cfcc5c1beda82fda2d248">nr_src</a> ()</td></tr>
<tr class="memdesc:a91fe670a353cfcc5c1beda82fda2d248"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rain drop concentration source term.  <br /></td></tr>
<tr class="separator:a91fe670a353cfcc5c1beda82fda2d248"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;class ct_params_t&gt;<br />
class slvr_blk_2m_common&lt; ct_params_t &gt;</div><p>Common base class for 2-moment bulk microphysics solver. </p>
<p>Double-moment cloud microphysics, including handling of rain and cloud water mixing ratios, fluxes. Inherits from either <a class="el" href="classslvr__common.html" title="Base solver class providing common functionality for all solver variants.">slvr_common</a> or <a class="el" href="classslvr__sgs.html" title="Subgrid-scale (SGS) turbulence solver with Smagorinsky closure.">slvr_sgs</a> depending on the SGS scheme.</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">ct_params_t</td><td>Compile-time parameter struct defining solver options. </td></tr>
  </table>
  </dd>
</dl>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad5085adafa9d68b1e69d0ac541a4fc4f" name="ad5085adafa9d68b1e69d0ac541a4fc4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5085adafa9d68b1e69d0ac541a4fc4f">&#9670;&#160;</a></span>slvr_blk_2m_common()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ct_params_t&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classslvr__blk__2m__common.html">slvr_blk_2m_common</a> </td>
          <td>(</td>
          <td class="paramtype">typename parent_t::ctor_args_t</td>          <td class="paramname"><span class="paramname"><em>args</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const rt_params_t &amp;</td>          <td class="paramname"><span class="paramname"><em>p</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel inline">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">args</td><td>Constructor arguments for parent class </td></tr>
    <tr><td class="paramname">p</td><td>Runtime parameters </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a0520b2c8f582d7f9a75f1372b43cfddd" name="a0520b2c8f582d7f9a75f1372b43cfddd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0520b2c8f582d7f9a75f1372b43cfddd">&#9670;&#160;</a></span>nc_src()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ct_params_t&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nc_src </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cloud droplet concentration source term. </p>
<p>Apply cloud droplet number (nc) source term due to large-scale vertical motion.</p>
<p>If <code>params.nc_src</code> is true, the subsidence is applied and the forcing coefficient <code>alpha</code> is set from the large-scale forcing function <code>F()</code>. The <code>beta</code> coefficient is set to zero. </p>

</div>
</div>
<a id="a91fe670a353cfcc5c1beda82fda2d248" name="a91fe670a353cfcc5c1beda82fda2d248"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91fe670a353cfcc5c1beda82fda2d248">&#9670;&#160;</a></span>nr_src()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ct_params_t&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void nr_src </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rain drop concentration source term. </p>
<p>Apply rain droplet number (nr) source term due to large-scale vertical motion.</p>
<p>If <code>params.nr_src</code> is true, the subsidence is applied and the forcing coefficient <code>alpha</code> is set from the large-scale forcing function <code>F()</code>. The <code>beta</code> coefficient is set to zero. </p>

</div>
</div>
<a id="aab1df2789797c5b479d81a6b5869a53f" name="aab1df2789797c5b479d81a6b5869a53f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab1df2789797c5b479d81a6b5869a53f">&#9670;&#160;</a></span>rc_src()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ct_params_t&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rc_src </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cloud water source term. </p>
<p>Apply cloud water (rc) source term due to large-scale vertical motion.</p>
<p>If <code>params.rc_src</code> is true, the subsidence is applied and the forcing coefficient <code>alpha</code> is set from the large-scale forcing function <code>F()</code>. The <code>beta</code> coefficient is set to zero. </p>

</div>
</div>
<a id="ae1055159bcbfa0beb14dc3e96579d5a7" name="ae1055159bcbfa0beb14dc3e96579d5a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1055159bcbfa0beb14dc3e96579d5a7">&#9670;&#160;</a></span>rr_src()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ct_params_t&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void rr_src </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel protected">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Rain source term. </p>
<p>Apply rain water (rr) source term due to large-scale vertical motion.</p>
<p>If <code>params.rr_src</code> is true, the subsidence is applied and the forcing coefficient <code>alpha</code> is set from the large-scale forcing function <code>F()</code>. The <code>beta</code> coefficient is set to zero. </p>

</div>
</div>
<a id="a9d61aec26a13f9277adb2c2ce2033b31" name="a9d61aec26a13f9277adb2c2ce2033b31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d61aec26a13f9277adb2c2ce2033b31">&#9670;&#160;</a></span>update_rhs()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class ct_params_t&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void update_rhs </td>
          <td>(</td>
          <td class="paramtype">libmpdataxx::arrvec_t&lt; typename parent_t::arr_t &gt; &amp;</td>          <td class="paramname"><span class="paramname"><em>rhs</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const typename parent_t::real_t &amp;</td>          <td class="paramname"><span class="paramname"><em>dt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int &amp;</td>          <td class="paramname"><span class="paramname"><em>at</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the right-hand-side of the prognostic equations. </p>
<p>Update the right-hand side (RHS) of prognostic equations for 2-moment microphysics.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rhs</td><td>RHS arrays for all scalars </td></tr>
    <tr><td class="paramname">dt</td><td>Time step </td></tr>
    <tr><td class="paramname">at</td><td>Current step index</td></tr>
  </table>
  </dd>
</dl>
<p>This function updates the RHS arrays for all cloud and rain scalars, including temperature (th), water vapor (rv), cloud water (rc), cloud droplet number (nc), rain water (rr), and rain droplet number (nr). The updates include:</p>
<ul>
<li>Storing total liquid water (cloud + rain) for buoyancy calculations.</li>
<li>Calling the parent RHS update routine.</li>
<li>Zeroing precipitation fluxes at the first substep.</li>
<li>Applying cell-wise microphysics updates using <code>libcloudph++::blk_2m::rhs_cellwise</code>.</li>
<li>Applying source terms and nudging forcings for cloud and rain water and number concentrations.</li>
<li>Optionally adding subgrid-scale forces if using an explicit turbulence model.</li>
<li>Ensuring that the RHS does not remove more mass than is present (prevents negative values).</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rhs</td><td>Array of RHS fields for all scalars. Updated in-place. </td></tr>
    <tr><td class="paramname">dt</td><td>Time step size. </td></tr>
    <tr><td class="paramname">at</td><td>Substep index.<ul>
<li>0: Eulerian integration or initial step for trapezoidal method</li>
<li>1: trapezoidal n+1 step </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classslvr__blk__2m__common.html">slvr_blk_2m_common</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2 </li>
  </ul>
</div>
</body>
</html>
